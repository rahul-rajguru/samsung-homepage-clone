<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Samsung - Your Cart</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    .font-display {
      font-family: 'Space Grotesk', sans-serif;
      font-weight: 700;
      letter-spacing: -0.02em;
    }

    .font-body {
      font-family: 'Inter', sans-serif;
      font-weight: 400;
    }

    .font-heading {
      font-family: 'Inter', sans-serif;
      font-weight: 600;
    }

    /* Cart item animation */
    .cart-item {
      transition: all 0.3s ease;
    }

    .cart-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }

    /* Empty cart animation */
    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }

    .floating-cart {
      animation: float 3s ease-in-out infinite;
    }
  </style>
</head>
<body class="font-body bg-gray-50 min-h-screen">
  <!-- Header -->
  <header class="bg-white shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center py-4">
        <!-- Logo -->
        <a href="index.html" class="flex items-center">
          <span class="text-2xl font-display text-blue-600">SAMSUNG</span>
        </a>

        <!-- Navigation -->
        <nav class="hidden md:flex space-x-8">
          <a href="index.html" class="text-gray-700 hover:text-blue-600 transition-colors">Home</a>
          <a href="#" class="text-gray-700 hover:text-blue-600 transition-colors">Products</a>
          <a href="#" class="text-gray-700 hover:text-blue-600 transition-colors">Support</a>
          <a href="#" class="text-gray-700 hover:text-blue-600 transition-colors">About</a>
        </nav>

        <!-- Icons -->
        <div class="flex items-center space-x-6">
          <!-- Cart Icon with Cart Link -->
          <a href="cart.html" class="relative flex items-center" title="View your cart" id="cartLink">
            <svg class="w-5 h-5 cursor-pointer text-blue-600 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M5.4 13L6 7H3m4 6v6a2 2 0 002 2h8a2 2 0 002-2v-6" />
            </svg>
            <span id="cartBadge" class="absolute -top-2 -right-2 bg-blue-600 text-white text-xs rounded-full h-4 w-4 items-center justify-center font-semibold hidden">0</span>
          </a>

          <!-- User Icon with Login/Logout Links -->
          <div class="flex items-center gap-3">
            <!-- Login Link (shown when not logged in) -->
            <a href="login.html" id="loginLink" class="flex items-center" title="Login to your Samsung account">
              <svg class="w-5 h-5 cursor-pointer text-gray-700 hover:text-blue-600 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
              </svg>
            </a>
            
            <!-- Logout Button (hidden by default, shown when logged in) -->
            <button id="logoutBtn" class="hidden text-sm text-gray-700 hover:text-blue-600 transition-colors font-medium" title="Logout from your Samsung account">
              Logout
            </button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <h1 class="text-3xl font-display mb-8">Your Cart</h1>

    <!-- Cart Items Container -->
    <div id="cartContainer" class="bg-white rounded-lg shadow-md p-6 mb-8">
      <!-- Cart items will be dynamically inserted here -->
      <div id="emptyCartMessage" class="hidden text-center py-12">
        <div class="floating-cart inline-block mb-4">
          <svg class="w-24 h-24 text-gray-400 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 3h2l.4 2M7 13h10l4-8H5.4M5.4 13L6 7H3m4 6v6a2 2 0 002 2h8a2 2 0 002-2v-6" />
          </svg>
        </div>
        <h2 class="text-2xl font-display text-gray-600 mb-2">Your cart is empty</h2>
        <p class="text-gray-500 mb-6">Looks like you haven't added any products to your cart yet.</p>
        <a href="index.html" class="bg-blue-600 text-white px-6 py-3 rounded-md font-semibold hover:bg-blue-700 transition-colors inline-block">Continue Shopping</a>
      </div>
    </div>

    <!-- Cart Summary -->
    <div id="cartSummary" class="bg-white rounded-lg shadow-md p-6 hidden">
      <h2 class="text-xl font-display mb-4">Order Summary</h2>
      <div class="border-t border-gray-200 pt-4">
        <div class="flex justify-between mb-2">
          <span class="text-gray-600">Subtotal</span>
          <span id="subtotalAmount" class="font-semibold">₹ 0.00</span>
        </div>
        <div class="flex justify-between mb-2">
          <span class="text-gray-600">Shipping</span>
          <span class="font-semibold">Free</span>
        </div>
        <div class="flex justify-between mb-2">
          <span class="text-gray-600">Tax</span>
          <span id="taxAmount" class="font-semibold">₹ 0.00</span>
        </div>
        <div class="flex justify-between border-t border-gray-200 pt-4 mt-4">
          <span class="text-lg font-display">Total</span>
          <span id="totalAmount" class="text-lg font-display">₹ 0.00</span>
        </div>
      </div>
      <button id="checkoutButton" class="w-full bg-blue-600 text-white py-3 rounded-md font-semibold mt-6 hover:bg-blue-700 transition-colors">
        Proceed to Checkout
      </button>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white py-12 mt-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <h3 class="text-lg font-display mb-4">Shop</h3>
          <ul class="space-y-2">
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Smartphones</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Tablets</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Watches</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors">TVs</a></li>
          </ul>
        </div>
        <div>
          <h3 class="text-lg font-display mb-4">Support</h3>
          <ul class="space-y-2">
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Contact Us</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Help Center</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Returns</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Order Status</a></li>
          </ul>
        </div>
        <div>
          <h3 class="text-lg font-display mb-4">Account</h3>
          <ul class="space-y-2">
            <li><a href="login.html" class="text-gray-400 hover:text-white transition-colors">Sign In</a></li>
            <li><a href="register.html" class="text-gray-400 hover:text-white transition-colors">Register</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors">My Orders</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors">My Profile</a></li>
          </ul>
        </div>
        <div>
          <h3 class="text-lg font-display mb-4">About Samsung</h3>
          <ul class="space-y-2">
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Company Info</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Careers</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Newsroom</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors">Sustainability</a></li>
          </ul>
        </div>
      </div>
      <div class="border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center">
        <p class="text-gray-400 text-sm">© 2025 Samsung Electronics Co., Ltd. All rights reserved.</p>
        <div class="flex space-x-6 mt-4 md:mt-0">
          <a href="#" class="text-gray-400 hover:text-white transition-colors">
            <span class="sr-only">Facebook</span>
            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" />
            </svg>
          </a>
          <a href="#" class="text-gray-400 hover:text-white transition-colors">
            <span class="sr-only">Instagram</span>
            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
            </svg>
          </a>
          <a href="#" class="text-gray-400 hover:text-white transition-colors">
            <span class="sr-only">Twitter</span>
            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84" />
            </svg>
          </a>
          <a href="#" class="text-gray-400 hover:text-white transition-colors">
            <span class="sr-only">YouTube</span>
            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path fill-rule="evenodd" d="M19.812 5.418c.861.23 1.538.907 1.768 1.768C21.998 8.746 22 12 22 12s0 3.255-.418 4.814a2.504 2.504 0 0 1-1.768 1.768c-1.56.419-7.814.419-7.814.419s-6.255 0-7.814-.419a2.505 2.505 0 0 1-1.768-1.768C2 15.255 2 12 2 12s0-3.255.417-4.814a2.507 2.507 0 0 1 1.768-1.768C5.744 5 11.998 5 11.998 5s6.255 0 7.814.418ZM15.194 12 10 15V9l5.194 3Z" clip-rule="evenodd" />
            </svg>
          </a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Cart Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const cartContainer = document.getElementById('cartContainer');
      const emptyCartMessage = document.getElementById('emptyCartMessage');
      const cartSummary = document.getElementById('cartSummary');
      const subtotalAmount = document.getElementById('subtotalAmount');
      const taxAmount = document.getElementById('taxAmount');
      const totalAmount = document.getElementById('totalAmount');
      const cartBadge = document.getElementById('cartBadge');
      const checkoutButton = document.getElementById('checkoutButton');
      
      // Get cart items from localStorage
      let cartItems = JSON.parse(localStorage.getItem('samsungCartItems')) || [];
      
      // Update cart badge
      function updateCartBadge() {
        if (cartBadge) {
          if (cartItems.length > 0) {
            cartBadge.textContent = cartItems.length;
            cartBadge.classList.remove('hidden');
          } else {
            cartBadge.classList.add('hidden');
          }
        }
      }
      
      // Format price
      function formatPrice(price) {
        if (typeof price === 'string') {
          return price;
        }
        return `₹ ${price.toFixed(2)}`;
      }
      
      // Calculate subtotal
      function calculateSubtotal() {
        return cartItems.reduce((total, item) => {
          const price = typeof item.price === 'string' 
            ? parseFloat(item.price.replace(/[^0-9.]/g, '')) 
            : item.price;
          return total + (price * item.quantity);
        }, 0);
      }
      
      // Render cart items
      function renderCart() {
        // Update cart badge
        updateCartBadge();
        
        // Clear existing cart items
        const existingItems = cartContainer.querySelectorAll('.cart-item');
        existingItems.forEach(item => item.remove());
        
        // Show empty cart message if no items
        if (cartItems.length === 0) {
          emptyCartMessage.classList.remove('hidden');
          cartSummary.classList.add('hidden');
          return;
        }
        
        // Hide empty cart message and show summary
        emptyCartMessage.classList.add('hidden');
        cartSummary.classList.remove('hidden');
        
        // Create cart items
        cartItems.forEach((item, index) => {
          // Debug log to check item properties
          console.log('Cart item:', item);
          
          const cartItem = document.createElement('div');
          cartItem.className = 'cart-item flex items-center justify-between border-b border-gray-200 py-4 last:border-b-0';
          
          // Check if item has an image property
          let imageHtml = '';
          if (item.image) {
            // Handle both regular URLs and base64 data URLs
            imageHtml = `<img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded-md mr-4" onerror="this.onerror=null; this.src='data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2264%22 height=%2264%22 viewBox=%220 0 24 24%22><rect width=%2224%22 height=%2224%22 fill=%22%23f3f4f6%22/><path d=%22M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z%22 stroke=%22%239ca3af%22 stroke-width=%221.5%22 fill=%22none%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22/></svg>';">`;  
          } else {
            imageHtml = `<div class="w-16 h-16 bg-gray-100 rounded-md flex items-center justify-center mr-4">
              <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0" />
              </svg>
            </div>`;
          }
          
          // Enhanced debug log for image URL
          if (item.image) {
            console.log('Image URL:', item.image);
            console.log('Image URL length:', item.image.length);
            console.log('Image URL starts with:', item.image.substring(0, 30));
            
            // Check if it's a base64 image
            if (item.image.startsWith('data:image')) {
              console.log('This is a base64 encoded image');
            }
            
            // Test image loading
            const testImg = new Image();
            testImg.onload = () => console.log(`Image loaded successfully: ${item.name} image`);
            testImg.onerror = () => console.error(`Failed to load image for: ${item.name}`);
            testImg.src = item.image;
          } else {
            console.log('No image found for item:', item.name);
          }
          
          // Format price correctly
          const priceDisplay = typeof item.price === 'number' ? 
            `₹${item.price.toLocaleString()}` : item.price;
          
          // Add product details based on what's available
          let detailsHtml = '';
          
          if (item.storage && item.color) {
            detailsHtml = `<p class="text-gray-600 text-sm">${item.storage} • ${item.color}</p>`;
          } else if (item.size && item.color) {
            detailsHtml = `<p class="text-gray-600 text-sm">${item.size} • ${item.color}</p>`;
          } else if (item.connectivity && item.color) {
            detailsHtml = `<p class="text-gray-600 text-sm">${item.connectivity} • ${item.color}</p>`;
          } else if (item.color) {
            detailsHtml = `<p class="text-gray-600 text-sm">${item.color}</p>`;
          } else if (item.storage) {
            detailsHtml = `<p class="text-gray-600 text-sm">${item.storage}</p>`;
          }
          
          cartItem.innerHTML = `
            <div class="flex items-center">
              ${imageHtml}
              <div>
                <h3 class="font-medium">${item.name}</h3>
                ${detailsHtml}
                <p class="text-gray-600 text-sm">Quantity: ${item.quantity}</p>
              </div>
            </div>
            <div class="flex items-center">
              <span class="font-medium mr-4">${priceDisplay}</span>
              <button class="remove-item text-gray-400 hover:text-red-500 transition-colors" data-index="${index}">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                </svg>
              </button>
            </div>
          `;
          
          // Insert before empty cart message
          cartContainer.insertBefore(cartItem, emptyCartMessage);
          
          // Add event listener to remove button
          const removeButton = cartItem.querySelector('.remove-item');
          removeButton.addEventListener('click', function() {
            const index = parseInt(this.getAttribute('data-index'));
            cartItems.splice(index, 1);
            localStorage.setItem('samsungCartItems', JSON.stringify(cartItems));
            renderCart();
          });
        });
        
        // Calculate and update summary
        const subtotal = calculateSubtotal();
        const tax = subtotal * 0.18; // 18% tax
        const total = subtotal + tax;
        
        subtotalAmount.textContent = formatPrice(subtotal);
        taxAmount.textContent = formatPrice(tax);
        totalAmount.textContent = formatPrice(total);
      }
      
      // Add checkout button event listener
      if (checkoutButton) {
        checkoutButton.addEventListener('click', function() {
          alert('Checkout functionality will be implemented in the future.');
        });
      }
      
      // Initial render
      renderCart();
    });
  </script>

  <!-- Authentication Script -->
  <script>
    // Check if user is logged in
    document.addEventListener('DOMContentLoaded', function() {
      const userData = localStorage.getItem('samsungUser');
      const loginLink = document.getElementById('loginLink');
      const logoutBtn = document.getElementById('logoutBtn');
      
      // If user data exists in localStorage, user is logged in
      if (userData) {
        const user = JSON.parse(userData);
        
        // Update UI for logged-in state
        if (loginLink) loginLink.classList.add('hidden');
        if (logoutBtn) logoutBtn.classList.remove('hidden');
      } else {
        // Update UI for logged-out state
        if (loginLink) loginLink.classList.remove('hidden');
        if (logoutBtn) logoutBtn.classList.add('hidden');
      }
      
      // Add logout functionality
      if (logoutBtn) {
        logoutBtn.addEventListener('click', function() {
          // Remove user data from localStorage
          localStorage.removeItem('samsungUser');
          
          // Show logout notification
          const logoutPopup = document.createElement('div');
          logoutPopup.className = 'fixed top-20 right-5 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50 transform transition-all duration-500 opacity-0 translate-y-2';
          logoutPopup.innerHTML = 'You have been successfully logged out!';
          document.body.appendChild(logoutPopup);
          
          // Show the popup
          setTimeout(() => {
            logoutPopup.classList.remove('opacity-0', 'translate-y-2');
            logoutPopup.classList.add('opacity-100', 'translate-y-0');
          }, 100);
          
          // Hide the popup after 3 seconds
          setTimeout(() => {
            logoutPopup.classList.add('opacity-0', 'translate-y-2');
            setTimeout(() => {
              logoutPopup.remove();
              
              // Redirect to home page after logout
              window.location.href = 'index.html';
            }, 500);
          }, 3000);
          
          // Update UI immediately
          loginLink.classList.remove('hidden');
          logoutBtn.classList.add('hidden');
        });
      }
    });
  </script>
</body>
</html>